import{F as q,S as b}from"./SimulationQuestion-f0c5f456.js";import{d as h,u as k,r as o,c as z,o as B,a as I,b as f,e as r,t as V,f as x,g as F,F as p,h as M,i,j as N,_ as C}from"./index-943d2405.js";const T={class:"question-grid"},A=h({__name:"SimulationView",props:{length:{type:Number,default:30},time:{type:Number,default:2400},categories:{type:Array}},setup(v){const a=v,_=k(),l=o([]),u=o(0),s=o(a.time),g=z(()=>{function e(y){var d="0"+y;return d.substring(d.length-2)}let n=Math.floor(s.value/60),t=s.value%60;return e(n)+":"+e(t)}),c=o(),m=()=>{clearInterval(c.value),u.value=1};function S(){if(s.value<=0)return;window.confirm("Sicuro di voler concludere la simulazione?")&&m()}const w=()=>{c.value=setInterval(()=>{if(s.value==0){m();return}s.value-=1},1e3)};return B(()=>{console.log(a.categories);let e=_.allQuestions;a.categories!=null&&(e=e.filter(n=>{var t;return(t=a.categories)==null?void 0:t.includes(n.questionCategory.id.toString())})),l.value=e.sort(()=>.5-Math.random()).slice(0,a.length),w()}),I((e,n)=>{if(!window.confirm("Sicuro di voler interrompere la simulazione?"))return!1}),(e,n)=>(i(),f(p,null,[r("div",{class:"card timer",onClick:n[0]||(n[0]=t=>S())},[r("span",null,V(g.value),1),r("span",null,[x(F(q),{icon:["fas","forward-step"]})])]),r("div",T,[(i(!0),f(p,null,M(l.value,t=>(i(),N(b,{key:t.id,"quiz-status":u.value,question:t},null,8,["quiz-status","question"]))),128))])],64))}});const Q=C(A,[["__scopeId","data-v-c77f3f2f"]]);export{Q as default};
