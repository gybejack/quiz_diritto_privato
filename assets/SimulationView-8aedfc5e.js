import{u as V,S as B}from"./SimulationQuestion-12f02a46.js";import{d as N,u as Q,a as x,r as d,c as M,o as O,b as F,e as T,f as m,g as n,t as f,h as w,i as a,n as D,j as b,F as y,k as E,l,m as h,p as L,q as R,s as $,_ as j}from"./index-193bf398.js";const W=r=>(R("data-v-aa381b0d"),r=r(),$(),r),G={key:0,class:"card floating result"},H=W(()=>n("span",null,"Salva gli errori",-1)),J={class:"question-grid"},K=N({__name:"SimulationView",props:{length:{type:Number,default:30},time:{type:Number,default:2400},categories:{type:Array}},setup(r){const u=r,k=Q(),o=V(),p=x();function q(){let e=[];o.result.forEach((t,s)=>{t||e.push(s)}),p.saveAll(e)}const c=d([]),v=d(0),i=d(u.time),C=M(()=>{function e(A){var _="0"+A;return _.substring(_.length-2)}let t=Math.floor(i.value/60),s=i.value%60;return e(t)+":"+e(s)}),g=d(),S=()=>{clearInterval(g.value),v.value=1};function I(){if(i.value<=0)return;window.confirm("Sicuro di voler concludere la simulazione?")&&S()}const z=()=>{g.value=setInterval(()=>{if(i.value==0){S();return}i.value-=1},1e3)};return O(()=>{let e=k.allQuestions;F.currentRoute.value.query.w=="1"&&(e=e.filter(t=>p.savedArrays.savedIds.includes(t.id))),u.categories!=null&&(e=e.filter(t=>{var s;return(s=u.categories)==null?void 0:s.includes(t.questionCategory.id.toString())})),c.value=e.sort(()=>.5-Math.random()).slice(0,u.length),z()}),T((e,t)=>window.confirm("Sicuro di voler interrompere la simulazione?")),(e,t)=>(l(),m(y,null,[n("div",{class:"card floating timer",onClick:t[0]||(t[0]=s=>I())},[n("span",null,f(C.value),1),n("span",null,[w(a(h),{icon:["fas","forward-step"]})])]),v.value==1?(l(),m("div",G,[n("div",null,[n("span",{class:D({failed:a(o).numberOfCorrectAnswers<24,success:a(o).numberOfCorrectAnswers>=24})},f(a(o).numberOfCorrectAnswers),3),n("span",null,f("/"+c.value.length),1)]),a(o).numberOfCorrectAnswers!=c.value.length?(l(),m("div",{key:0,class:"save-wrong-button",onClick:t[1]||(t[1]=s=>q())},[H,n("span",null,[w(a(h),{class:"action-button",icon:["fas","bookmark"]})])])):b("",!0)])):b("",!0),n("div",J,[(l(!0),m(y,null,E(c.value,s=>(l(),L(B,{key:s.id,"quiz-status":v.value,question:s},null,8,["quiz-status","question"]))),128))])],64))}});const X=j(K,[["__scopeId","data-v-aa381b0d"]]);export{X as default};
